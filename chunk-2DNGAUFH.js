import{a as h}from"./chunk-XKHRF2WW.js";import{H as c,T as n,aa as u,fa as p,q as a,u as d}from"./chunk-FZY324E7.js";var A=(()=>{class s{constructor(i){this._http=i,this.BASE="assets/data",this.ROUTES_DIR=`${this.BASE}/routes`,this.ROUTES_LIST=`${this.BASE}/routes-list.json`,this.toLngLat=t=>{if(Array.isArray(t)&&t.length>=2){let o=Number(t[0]),e=Number(t[1]);if(Number.isFinite(o)&&Number.isFinite(e))return[o,e]}},this.parseAnyPayload=t=>t&&t.type==="FeatureCollection"&&Array.isArray(t.features)?t.features.filter(e=>e?.geometry?.type==="Point"&&this.toLngLat(e.geometry?.coordinates)).map(e=>{let r=e.properties??{};return{id:String(r?.id??e.id??""),order:typeof r?.order=="number"?r.order:void 0,color:r?.color,durationText:r?.durationText,distanceText:r?.distanceText,startAddress:r?.start?.addressComponent?.address,endAddress:r?.end?.addressComponent?.address,coordinates:this.toLngLat(e.geometry.coordinates)}}):[]}findAll(){return this._http.get(this.ROUTES_LIST).pipe(d(this.parseAnyPayload),c(i=>(console.warn("routes list load failed:",i),a([]))),n(1))}getById(i){return this._http.get(`${this.ROUTES_DIR}/${i}.json`).pipe(n(1))}static{this.\u0275fac=function(t){return new(t||s)(p(h))}}static{this.\u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();export{A as a};
